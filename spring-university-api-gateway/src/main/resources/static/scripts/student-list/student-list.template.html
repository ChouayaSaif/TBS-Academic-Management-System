<div class="container">
    <h2><span class="fa fa-search"></span> Find Students</h2>

    <div class="row mb-4">
        <div class="col-md-6">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Search by name or student ID..."
                       ng-model="$ctrl.searchQuery" ng-keyup="$event.keyCode === 13 && $ctrl.searchStudents()">
                <button class="btn btn-primary" type="button" ng-click="$ctrl.searchStudents()">
                    <span class="fa fa-search"></span> Search
                </button>
            </div>
        </div>
        <div class="col-md-6 text-end">
            <a ui-sref="studentNew" class="btn btn-success">
                <span class="fa fa-user-plus"></span> Register New Student
            </a>
        </div>
    </div>

    <div ng-if="$ctrl.loading" class="text-center">
        <span class="fa fa-spinner fa-spin fa-3x"></span>
        <p>Loading students...</p>
    </div>

    <div ng-if="$ctrl.error" class="alert alert-danger">
        {{$ctrl.error}}
    </div>

    <div ng-if="!$ctrl.loading && $ctrl.students.length === 0" class="alert alert-info">
        No students found. <a ui-sref="studentNew">Register a new student</a>
    </div>

    <table class="table table-striped table-hover" ng-if="!$ctrl.loading && $ctrl.students.length > 0">
        <thead class="table-dark">
            <tr>
                <th>Student ID</th>
                <th>Name</th>
                <th>Email</th>
                <th>Department</th>
                <th>Registered Courses</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="student in $ctrl.students">
                <td>{{student.studentId}}</td>
                <td>{{student.firstName}} {{student.lastName}}</td>
                <td>{{student.email}}</td>
                <td>{{student.department}}</td>
                <td>
                    <span class="badge" ng-class="{'bg-success': student.courses.length >= 6, 'bg-warning': student.courses.length < 6}">
                        {{student.courses ? student.courses.length : 0}} / 7
                    </span>
                </td>
                <td>
                    <button class="btn btn-sm btn-info me-1" ng-click="$ctrl.viewStudent(student.id)">
                        <span class="fa fa-eye"></span> View
                    </button>
                    <button class="btn btn-sm btn-primary" ng-click="$ctrl.registerCourses(student.id)">
                        <span class="fa fa-book"></span> Courses
                    </button>
                </td>
            </tr>
        </tbody>
    </table>
</div>

